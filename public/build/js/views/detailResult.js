define(["jquery","backbone","underscore","text!templates/detailResult.html"],function(a,b,c,d){var e=b.View.extend({model:null,tagName:"li",className:"detailResult",template:null,initialize:function(){c.bindAll(this,"render","unrender","editWord","saveWord","onClickRating"),this.model=this.options.model,this.model.bind("change",this.render),this.model.view=this,this.template=c.template(d)},onClickRating:function(a){if(!1===AppRouter.checkLoginState())return;var b=this.model.get("user_voted");if(parseInt(b,10)===a){this.model.save({user_voted:0});return}this.model.save({user_voted:a});return},editWord:function(){!0===AppRouter.getLoginState()?(a(".detailWord",this.model.el).attr("contentEditable",!0),a(".detailWord",this.model.el).focus(),a(".detailExample",this.model.el).attr("contentEditable",!0),a(".editIcon",this.model.el).addClass("hidden"),a(".saveIcon",this.model.el).removeClass("hidden"),a(".saveIcon",this.model.el).on("click",c.bind(this.saveWord,this))):AppRouter.navigate("login",!0)},saveWord:function(){this.model.save({word:a(".detailWord",this.model.el).text(),example:a(".detailExample",this.model.el).text()})},unrender:function(){return a(this.model.el).remove(),this},render:function(){var b=this.model,d=a(this.el);d.html(this.template(b.toJSON()));var e=parseInt(b.get("user_voted"),10);return!0===AppRouter.getLoginState()&&e!==0&&(e===1?a(".rateUp",d).addClass("voted"):e===-1&&a(".rateDown",d).addClass("voted")),a(".rateUp",d).on("click",c.bind(this.onClickRating,this,1)),a(".rateDown",d).on("click",c.bind(this.onClickRating,this,-1)),a(".editIcon",d).on("click",c.bind(this.editWord,this)),a(".editIcon",d).removeClass("hidden"),this.model.el=d,this}});return e})